<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mashu Kushibiki - Portfolio</title>
    <meta name="description" content="Portfolio">
    <meta name="author" content="Mashu Kushibiki">
    <link rel="stylesheet" href="/assets/css/fontawesome.min.css">
    <link rel="stylesheet" type="text/css" href="/assets/css/styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.3/Chart.bundle.min.js"></script>
    <script src="/assets/js/main.js"></script>
  </head>
  <body>
    <div id="root"></div>
    <script type="text/javascript">
    var app = Elm.Main.init({
      node: document.getElementById('root')
    });

    app.ports.languageSkillsToJs.subscribe(function(skills){
      var names = [],
          levels = [],
          colors = [];

      skills.map(skill => {
        names.push(skill.name);
        levels.push(skill.level);
        colors.push(skill.color);
      });

      var helperColor = Chart.helpers.color;
      var backgroundColor = colors.map(function(color){
        return helperColor(color).alpha(0.65).rgbString();
      });

      var type = 'horizontalBar';
      var data = {
        labels: names,
        datasets: [{
          label: "Language Skills",
          data: levels,
          backgroundColor: backgroundColor,
          borderColor: colors,
          borderWidth: 1.5,
        }],
      }

      var options = {
        responsive: true,
        legend: {
          display: false
        },
        scales: {
          xAxes: [{
            ticks: {
              min: 0,
              max: 100
            }
          }],
          yAxes: [{
            ticks: {
              fontSize: 16
            }
          }],
        },
      }

      var ctx = document.getElementById('language_skills');
      var languageSkillChart = new Chart(ctx, {
        type: type,
        data: data,
        options: options
      });
    });
    </script>
  </body>
</html>